# IvanovItog

IvanovItog — настольное WPF-приложение для управления заявками учебного центра. Решение построено на .NET 8 и использует архитектуру MVVM с чистым разделением на домен, инфраструктуру и презентацию.

## Структура решения

```
IvanovItog.sln
├─ src/
│  ├─ IvanovItog.App/            # WPF UI, MVVM, LiveCharts, Serilog
│  ├─ IvanovItog.Domain/         # Доменные сущности, перечисления, интерфейсы, DTO, Result
│  ├─ IvanovItog.Infrastructure/ # EF Core + сервисы, сиды, DI, валидаторы
│  └─ IvanovItog.Shared/         # Общие DTO и контракты обмена между слоями
└─ tests/
   └─ IvanovItog.Infrastructure.Tests/ # xUnit-тесты инфраструктурной логики
```

## Возможности

- Авторизация с ролями Admin/Tech/User и хранением хешей паролей (BCrypt.Net).
- Самостоятельная регистрация новых пользователей с ролью User прямо из окна входа.
- Панель администратора для создания, редактирования и удаления пользователей, включая смену логина и сброс пароля.
- Управление заявками: фильтрация, поиск, назначение техников, закрытие, экспорт в CSV.
- Оценка эффективности техников (рейтинг с учётом просрочек и приоритетов).
- Аналитика (LiveCharts): распределение по статусам, динамика обращений, нагрузка техников.
- Настройки пользователя: тема (Light/Dark), путь вложений, уведомления, смена собственного пароля.
- Локальные уведомления в журнале (SQLite Notifications).
- Сидирование SQLite-базы на старте.

## Требования

- .NET 8 SDK
- Windows 10 версии 2004 (build 19041) или новее с поддержкой WPF

## Сборка и запуск

```bash
# восстановление пакетов
 dotnet restore

# запуск WPF-приложения
 dotnet build src/IvanovItog.App/IvanovItog.App.csproj
 dotnet run --project src/IvanovItog.App/IvanovItog.App.csproj
```

## Тесты

```bash
 dotnet test
```

## Тестовые данные

При первом запуске база автоматически наполняется сценариями за период с 01.09.2025 по 30.10.2025. Доступны следующие учётные записи (пароль `123456`):

- `admin` — Администратор системы
- `tech.ivanov` — Иванов Иван Иванович (техник)
- `tech.petrov` — Петров Пётр Петрович (техник)
- `tech.sidorova` — Сидорова Анна Сергеевна (техник)
- `user.mironova` — Миронова Елена Павловна (пользователь)

## Настройки

После первого запуска будет создан файл `appsettings.user.json` в каталоге приложения. Его можно редактировать вручную либо через экран настроек.

## Лицензия

MIT
